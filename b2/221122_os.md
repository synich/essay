# 打包软件的故事

起因是想解压rpm和deb包，发现并不是zip压缩，rpm需要rpm2cpio工具转成cpio做进一步处理，而deb要用ar x命令解压得到内容。cpio和ar都不是最常见的打包软件，于是诱发我去了解背后的原委。

最为人熟知的打包软件应该是tar了，有史可查最早在1978年随着system 7发布，后来也搭载在III和V以及BSD一起发布。tar会递归地遍历目录然后打包，这个递归动作不能取消，由于命令行操作的便利性，tar成了最流行的打包工具。tar有很多变体，支持的格式不尽相同，后来出了POSIX规范，至少我没有遇到需要特定版本的tar才能解析的问题。

cpio是copy in copy out的简称，不支持递归查找源始文件，所以不适合命令行，通常提供文件清单或配合find一起用。常见的似乎只有rpm和initrd会用cpio方式。

如果说tar和cpio还算打包软件，ar则更多的归属到编译体系。ar最常见的用法，是把多个.o文件合并成.a，并用ranlib给.a添加符号索引，进而加快链接速度。具备把多文件合并的功能，更偏向cpio的定位。把deb文件解开后，得到数个tar文件，不明白为什么会选择这种方式。