# YXcms和CanPHP的结合

以前写过一篇URL路由，提到YXcms的解析思路，分析整体代码的思路。

CanPHP的结构很清晰，分core/lib/ext三个目录，lib是官方功能扩展，ext是第三方扩展。core的顶级只有1017行代码，算上cache和db目录的各种不同实现共2千行。lib包括鉴权、图片等常用功能共5292行。ext有邮件和IP地址共1015行。

core目录有如下文件，cpApp加载入口，cpModel/cpCache数据库相关，cpTemplate/cpHtmlCache页面展示，cpConfig/cpError辅助功能。对于框架来说一定要提供M和V，而C天然是应用层要做的事，CanPHP做到了。

YXcms会在它的体系中包含这些文件，cpModel被model使用，cpCache在cpModel内部包含，不需要显式使用。cpTemplate被controller和commonController使用，cpHtmlCache被baseController使用。cpConfig和cpError直接在YXcms的入口文件core使用。cpApp的入口功能被core重写，所以没有被使用。从中可以看出，CanPHP最核心的功能一个不落地被YXcms引用了。

YXcms具有完整的MVC，C的代表controller，构造时会创建model，其view函数会创建cpTemplate进而渲染视图。V是一堆含有待替换值的HTML页面。