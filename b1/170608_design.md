灯光和相机差异的关联和协议需求
====
不同相机对灯光的需求差异很大，交通相机、普通IPC、球式相机都有各自的特点。

比如交通相机工作重点在于车牌抓拍，最主要的就是如何把车牌拍清晰，重在静态的图片而不是视频，另外车牌和相机的距离必须在一个固定值，否则拍出来的照片内车牌尺寸就不合适。基于此，交通相机补光的范围只要保证在一个固定范围能恰好能打亮就行，加上车牌必须是彩色，只能用白光灯，红外灯是没有价值的。因此交通相机的补光灯有频闪、爆闪和常亮三种灯，频闪和爆闪更是只追求瞬间亮度，保证这一时刻车牌清晰就足够了。

球机除了旋转功能，缩放也是一大亮点。目前球机的比拼很大一块也投入了比谁看得更远。30倍甚至40倍变焦都已出现。所以球机的指标里距离是很重要的。为了配合距离灯光也有近中远的区分。而灯光又分为红外、白光、激光。红外主要用于晚上距离可以达到几百米，白光可以照亮但距离也短得多，往往只有几十米。

IPC主要使用场景是室内，一般只配备红外灯，和IPC体积小散热结构有关，白光的热能比红外更大。

可见仅仅是补光一项，必须根据不同相机的使用场景搭配适当的灯光。

灯光差异这么大，灯光协议也很容易入坑。比如球机的灯光配置要从全时扩展成分时，就怎么修改都无法满足。

最初的灯光协议只说明是补光，未说明是红外还是白光。了解到原来球机因为只有一种灯，如果是复合灯则用另一套配置。虽然暂时解决了问题，但Lighting配置的作用到底是夜视还是全彩，依然不确定。这是协议的第一个问题。教训，不要把一种配置作多种明显不同的用途。

配置的形式是数组，但只用了第一维元素。不知道最初设计数组的目的是什么，然后需求来了，对不同的时间段要有不同的灯光配置。但问题又出在是否启用日夜模式并不在Lighting配置，就会出现A客户端修改了灯光模式，结果B客户端无论如何修改都无法成功。所以模式必须也在Lighting配置中。