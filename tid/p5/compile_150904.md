# Chomsky的4型文法与BNF

按序有4种文法，从强到弱排列如下

Type-0：也称短语文法，产生式为A-〉B，A和B均包含terminal和nonterminal，表达力最强，等价与图灵机

Type-1：也称为上下文相关文法，CSG。是0型的特例，要求|A|<=|B|。与0型的差异暂时还不明白。

Type-2：也称为上下文无关文法，CFG。是1型的特例，要求A只能是一个nonterminal，由于只有一个，因此也就没有上下文，故而当然是上下文无关了。对应下推自动机Push Down Automaton，是带一个栈的有限状态机扩展，比图灵机的双栈要弱。下推自动机也分确定型和非确定型，两者的能力不相等，其中非确定型等价于CFG。

Type-3：也称正则文法，是2型的特例，由于2型已经限定了左侧，故3型的限制在于右侧至多有两个符号，且只能是两种形式，A->a，或者A->aB。a是terminal，A->a很好理解，状态已经推导确定，A->aB我的理解是3型文法具备cleene闭包特性，可以无限推导，但由于不带栈，故不能记忆状态。而A->Ba这种文法，必须要先把B压栈，再lookahead一次，才能确定是否符合文法规则，因此不属于文法3类型。3型对应的自动机是有限状态机。

前面说的是语言学的纯理论部分，接下来看BNF方法记述

Backus Naur Form定义于1960年代，是一种格式化的语法记法。
所谓格式化是可以严格推导、能用数字证明的方法。

原始的BNF格式能表达Context Free Grammar。只是由于语法偏少，
所以后人又做了扩充。扩充有两大流派

* EBNF Extended BNF，是PASCAL的作者wirth做的扩展，后来也被ISO标准化定案
* ABNF Augmented BNF，有IETF的RFC标准定义的扩展格式

与我最初想像的不同，有RFC背书的ABNF并不是最广泛使用的格式，
还是EBNF用得更多一些。比如Lua5.1的EBNF定义，使用了22条规则就把所有语法规则定义完了。
两套表示法以及BNF的表达能力是一样的，只是书写时的简便程度不同。
似乎并不是所有的语言都能用EBNF来表达，不过语言最好还是要设计得符合简洁才好。

BNF只是一种记述法，对应编译的语法分析阶段，像YACC的语法就和BNF很类似，
但不完全一致，典型的比如`::=`这个符号就直接简写成`=`了。
好在没有特别大的差异，基本都是一眼就能看得懂的转义。