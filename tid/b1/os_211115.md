# 搭建最小化的Linux系统

有个很有名的发行版Linux From Scratch，非常地繁琐，我们可以从一个近似的形态去一窥究竟，也从中了解很多和二进制执行相关的内容。

看过toybox作者给aboriginal写的介绍可知，最小化的系统只要具备4个文件就可以运行：linux、toybox、musl、tcc。linux作为内核没什么要说的，其它3个值得一说

* toybox: 另一个同样定位但更强的软件是busybox，这几乎是惟一的应用层全静态链接软件，不依赖libc，只要选对CPU指令集，就可以在主机工作。为什么全静态链接如此重要，稍后解释
* musl: 虽然看起来只是个C库，但同时它也是个动态加载器
* tcc: 编译器自然是少不了的，在编译的时候可以指定interp的路径，可以适配不同系统的动态加载器名

极简环境可以从Android的终端开始进行模拟，首先在这个终端中放入busybox，至少具备了各种操作能力。

## 遇到的问题

低版本安卓编译的程序，到版本7后运行报错，提示可执行程序必须用 *-fPIE* 方式编译，通常动态库为了动态加载到多个不同进程，都会添加-fPIC标记，但执行程序本身是独立的虚假内存空间，可能出于安全的考虑吧，不是PIE编译的话就不能运行了。