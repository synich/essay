# 01-CSS的基础理解

## 写在前面

HTML是SGML系，整体风格都是树状。原生如h1,p,table等标签就属于CSS1范围的选择器，浏览器内建了各种HTML标签的CSS基础样式，因此最简单的网页，哪怕不定义任何CSS也具备一定可读性。当然除了原生的选择器，还有类选择器、ID选择器以及伪类等高级用法(当然对应CSS的级别也更高)，这时就必须由用户指定样式，浏览器只负责渲染。

CSS作为大HTML的一部分往往会被浏览器缓存，虽然在HTML层面可以用一些方法控制缓存策略(比如PHP的setheader或者在HTML用`<meta HTTP-EQUIV>`标签强制修改缓存策略为no-cache，但CSS作为外链的附加属性就没这么幸运了。通常的作法是在引入CSS文件的末尾加上?v=1标志，当CSS内容有更改时，则改变v的值，由于CSS文件链接在HTML中，HTML可以控制不用缓存，浏览器读取到新的v值就会重新获取CSS文件。否则只能用Ctrl-F5的方式强制更新，界面才会用上新样式。

前端领域一直在快速变化着，对CSS的认识也有很多流派

## 视口

手机版页面的文字非常小，且经常要来回地拖动。几经查找看到viewport概念，是Apple的mobile safari首先提出，后来各个移动浏览器厂商都跟进了。具体地说在html的head部分加这这样一句，网页效果会如你所预期那样：

```
<meta name="viewport" content="width=device-width,height=device-height,initial-scale=1.0,maximum-scale=1.0,user-scalable=no" />
```

这里面最重要的莫过于width=device-width和inital-scale=1.0两句，由于不同设备的宽度不同，有了device-width指定可以大致做到不同页面如预期，但如果没有inital-scale，至少在这个博客上会非常难看，正文栏所占的宽度很窄，加上之后所有的内容就正常了。再说一句user-scalable，如果没有这句，每次焦点到输入框，页面会稍稍扩大一点，有种跳变感。再者对手机网页来说一旦可以缩放，反而会来回拖动体验未必就好，不如一开始就把布局字体设置妥当，之后就不必调整了。

## CSS主题分类 up 18年3月24日

CSS范围庞杂，本篇只讲表现样式，其它见系列

* 表现样式: 范围最广，包括但不限于颜色/字体/数字/单位/函数
* 计算规则: 继承与层叠，选择器
* 布局: 盒模型与定位

### 表现样式 - 数字/单位/函数

这可能是相对比较好理解的主题，也是最早就有的内容。HTML5丰富了b/i等各种样式元素，使HTML更专注于语义层面。但是内容比较繁琐，加上还要考虑各种不同屏幕的差异，细节非常多。

* px/em/rem: 默认字体大小16px，对应1em
* vw/vh: 相对宽高，1表示1%的总宽度/高度
* fr: grid布局的单位

关于px单位，引用hax的解释

>    CSS规定，浏览器应该对像素值进行缩放调节，以保持阅读体验的大体一致。也就是要保持一定像素的长度在不同设备输出上看上去的大小总是差不多。 因此CSS提出了“参考像素”（reference pixel）概念。规范使用视角来定义“参考像素”，1参考像素即为从一臂之遥看解析度为96DPI的设备输出（即1英寸96点）时，1点（即1/96英寸）的视角。 请注意这个差别——CSS规范定义的参考像素并不是1/96英寸，而是1/96英寸在一臂之遥的看起来的视角。通常认为常人臂长为28英寸，所以其视角可以计算出来是0.0213度，即(1/96)in / (28in * 2 * PI / 360deg)。

可以看到px和物理分辨率并不等价，对PC而言，由于人眼和显示器的距离与CSS定义基本一致，二者近似划等号；而手机的分辨率虽然高于PC，但仍然要符合规范，因此手机屏幕宽度px值会比分辨率小很多，具体多少px由每个厂商各自定义。从而保证了16px字号在不同显示设备上看起来的视觉效果是接近的。

函数只有预定义函数，比如counter/calc可以进行数值计算，url则可以进行外部资源的导入。要想添加自定义函数还得靠预处理器。
