# 两个小微JS库的使用

因为网站重构，本来不想使用JS用了htmx库，奈何实在拉胯，只得重新用JS，但不想用太复杂的库遂选了两个，一个MVVM一个类jQuery库，记录一些JS的惯用法。

## psQuery

说说$变量的构造，在库的开始定义一个单变量的函数，在函数定义完成后惯例性的调用，此时传入this参数（对应window）。然后在代码中用了句`n.$||(n.$=t)`。这个n就是this，t则是构建好的类jQuery对象，先判断全局是否已经定义$变量，没有就把自己挂接上去。

最终还是借助GPT的帮助，用XMLHttpRequest实现自己的功能。无非就是构建XHR对象，并用open/set方法设置是否异步和参数，最后通过send真正触发动作。

## DB.js

MVVM库，希望监听的DOM元素增加类似`db="text:spanText,class:red"`属性。当你手动执行DB.scanHTML后，会扫描document所有节点，如果有db属性就会用DB.observable转化成可监听对象，然后把db属性去掉。接下来操作js对象就能自动触发DOM元素的变化。只要保证js的对象名，和db属性某个冒号后的名字一样，就能绑定。

单纯的绑定没大价值，有意义的是compute属性，实现了一个元素依赖其它元素的自动更新。依然借鉴思路，实现了一个简化DOM元素访问函数。
